// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package s3

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumix"
)

// Provides an S3 bucket Object Lock configuration resource. For more information about Object Locking, go to [Using S3 Object Lock](https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lock.html) in the Amazon S3 User Guide.
//
// > **NOTE:** This resource **does not enable** Object Lock for **new** buckets. It configures a default retention period for objects placed in the specified bucket.
// Thus, to **enable** Object Lock for a **new** bucket, see the Using object lock configuration section in  the `s3.BucketV2` resource or the Object Lock configuration for a new bucket example below.
// If you want to **enable** Object Lock for an **existing** bucket, contact AWS Support and see the Object Lock configuration for an existing bucket example below.
type BucketObjectLockConfigurationV2 struct {
	pulumi.CustomResourceState

	// Name of the bucket.
	Bucket pulumix.Output[string] `pulumi:"bucket"`
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner pulumix.Output[*string] `pulumi:"expectedBucketOwner"`
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled pulumix.Output[*string] `pulumi:"objectLockEnabled"`
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule pulumix.GPtrOutput[BucketObjectLockConfigurationV2Rule, BucketObjectLockConfigurationV2RuleOutput] `pulumi:"rule"`
	// Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's "Object Lock token".
	// The token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the `s3.BucketVersioningV2` resource.
	Token pulumix.Output[*string] `pulumi:"token"`
}

// NewBucketObjectLockConfigurationV2 registers a new resource with the given unique name, arguments, and options.
func NewBucketObjectLockConfigurationV2(ctx *pulumi.Context,
	name string, args *BucketObjectLockConfigurationV2Args, opts ...pulumi.ResourceOption) (*BucketObjectLockConfigurationV2, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.Bucket == nil {
		return nil, errors.New("invalid value for required argument 'Bucket'")
	}
	if args.Token != nil {
		untypedSecretValue := pulumi.ToSecret(args.Token.ToOutput(ctx.Context()).Untyped())
		args.Token = pulumix.MustConvertTyped[*string](untypedSecretValue)
	}
	secrets := pulumi.AdditionalSecretOutputs([]string{
		"token",
	})
	opts = append(opts, secrets)
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource BucketObjectLockConfigurationV2
	err := ctx.RegisterResource("aws:s3/bucketObjectLockConfigurationV2:BucketObjectLockConfigurationV2", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetBucketObjectLockConfigurationV2 gets an existing BucketObjectLockConfigurationV2 resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetBucketObjectLockConfigurationV2(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *BucketObjectLockConfigurationV2State, opts ...pulumi.ResourceOption) (*BucketObjectLockConfigurationV2, error) {
	var resource BucketObjectLockConfigurationV2
	err := ctx.ReadResource("aws:s3/bucketObjectLockConfigurationV2:BucketObjectLockConfigurationV2", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering BucketObjectLockConfigurationV2 resources.
type bucketObjectLockConfigurationV2State struct {
	// Name of the bucket.
	Bucket *string `pulumi:"bucket"`
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner *string `pulumi:"expectedBucketOwner"`
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled *string `pulumi:"objectLockEnabled"`
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule *BucketObjectLockConfigurationV2Rule `pulumi:"rule"`
	// Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's "Object Lock token".
	// The token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the `s3.BucketVersioningV2` resource.
	Token *string `pulumi:"token"`
}

type BucketObjectLockConfigurationV2State struct {
	// Name of the bucket.
	Bucket pulumix.Input[*string]
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner pulumix.Input[*string]
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled pulumix.Input[*string]
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule pulumix.Input[*BucketObjectLockConfigurationV2RuleArgs]
	// Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's "Object Lock token".
	// The token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the `s3.BucketVersioningV2` resource.
	Token pulumix.Input[*string]
}

func (BucketObjectLockConfigurationV2State) ElementType() reflect.Type {
	return reflect.TypeOf((*bucketObjectLockConfigurationV2State)(nil)).Elem()
}

type bucketObjectLockConfigurationV2Args struct {
	// Name of the bucket.
	Bucket string `pulumi:"bucket"`
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner *string `pulumi:"expectedBucketOwner"`
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled *string `pulumi:"objectLockEnabled"`
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule *BucketObjectLockConfigurationV2Rule `pulumi:"rule"`
	// Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's "Object Lock token".
	// The token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the `s3.BucketVersioningV2` resource.
	Token *string `pulumi:"token"`
}

// The set of arguments for constructing a BucketObjectLockConfigurationV2 resource.
type BucketObjectLockConfigurationV2Args struct {
	// Name of the bucket.
	Bucket pulumix.Input[string]
	// Account ID of the expected bucket owner.
	ExpectedBucketOwner pulumix.Input[*string]
	// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
	ObjectLockEnabled pulumix.Input[*string]
	// Configuration block for specifying the Object Lock rule for the specified object. See below.
	Rule pulumix.Input[*BucketObjectLockConfigurationV2RuleArgs]
	// Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's "Object Lock token".
	// The token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the `s3.BucketVersioningV2` resource.
	Token pulumix.Input[*string]
}

func (BucketObjectLockConfigurationV2Args) ElementType() reflect.Type {
	return reflect.TypeOf((*bucketObjectLockConfigurationV2Args)(nil)).Elem()
}

type BucketObjectLockConfigurationV2Output struct{ *pulumi.OutputState }

func (BucketObjectLockConfigurationV2Output) ElementType() reflect.Type {
	return reflect.TypeOf((*BucketObjectLockConfigurationV2)(nil)).Elem()
}

func (o BucketObjectLockConfigurationV2Output) ToBucketObjectLockConfigurationV2Output() BucketObjectLockConfigurationV2Output {
	return o
}

func (o BucketObjectLockConfigurationV2Output) ToBucketObjectLockConfigurationV2OutputWithContext(ctx context.Context) BucketObjectLockConfigurationV2Output {
	return o
}

func (o BucketObjectLockConfigurationV2Output) ToOutput(ctx context.Context) pulumix.Output[BucketObjectLockConfigurationV2] {
	return pulumix.Output[BucketObjectLockConfigurationV2]{
		OutputState: o.OutputState,
	}
}

// Name of the bucket.
func (o BucketObjectLockConfigurationV2Output) Bucket() pulumix.Output[string] {
	value := pulumix.Apply[BucketObjectLockConfigurationV2](o, func(v BucketObjectLockConfigurationV2) pulumix.Output[string] { return v.Bucket })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// Account ID of the expected bucket owner.
func (o BucketObjectLockConfigurationV2Output) ExpectedBucketOwner() pulumix.Output[*string] {
	value := pulumix.Apply[BucketObjectLockConfigurationV2](o, func(v BucketObjectLockConfigurationV2) pulumix.Output[*string] { return v.ExpectedBucketOwner })
	return pulumix.Flatten[*string, pulumix.Output[*string]](value)
}

// Indicates whether this bucket has an Object Lock configuration enabled. Defaults to `Enabled`. Valid values: `Enabled`.
func (o BucketObjectLockConfigurationV2Output) ObjectLockEnabled() pulumix.Output[*string] {
	value := pulumix.Apply[BucketObjectLockConfigurationV2](o, func(v BucketObjectLockConfigurationV2) pulumix.Output[*string] { return v.ObjectLockEnabled })
	return pulumix.Flatten[*string, pulumix.Output[*string]](value)
}

// Configuration block for specifying the Object Lock rule for the specified object. See below.
func (o BucketObjectLockConfigurationV2Output) Rule() pulumix.GPtrOutput[BucketObjectLockConfigurationV2Rule, BucketObjectLockConfigurationV2RuleOutput] {
	value := pulumix.Apply[BucketObjectLockConfigurationV2](o, func(v BucketObjectLockConfigurationV2) pulumix.GPtrOutput[BucketObjectLockConfigurationV2Rule, BucketObjectLockConfigurationV2RuleOutput] {
		return v.Rule
	})
	unwrapped := pulumix.Flatten[*BucketObjectLockConfigurationV2Rule, pulumix.GPtrOutput[BucketObjectLockConfigurationV2Rule, BucketObjectLockConfigurationV2RuleOutput]](value)
	return pulumix.GPtrOutput[BucketObjectLockConfigurationV2Rule, BucketObjectLockConfigurationV2RuleOutput]{OutputState: unwrapped.OutputState}
}

// Token to allow Object Lock to be enabled for an existing bucket. You must contact AWS support for the bucket's "Object Lock token".
// The token is generated in the back-end when [versioning](https://docs.aws.amazon.com/AmazonS3/latest/userguide/manage-versioning-examples.html) is enabled on a bucket. For more details on versioning, see the `s3.BucketVersioningV2` resource.
func (o BucketObjectLockConfigurationV2Output) Token() pulumix.Output[*string] {
	value := pulumix.Apply[BucketObjectLockConfigurationV2](o, func(v BucketObjectLockConfigurationV2) pulumix.Output[*string] { return v.Token })
	return pulumix.Flatten[*string, pulumix.Output[*string]](value)
}

func init() {
	pulumi.RegisterOutputType(BucketObjectLockConfigurationV2Output{})
}
