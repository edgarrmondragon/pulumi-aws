// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package lakeformation

import (
	"context"
	"reflect"

	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumix"
)

// Get permissions for a principal to access metadata in the Data Catalog and data organized in underlying data storage such as Amazon S3. Permissions are granted to a principal, in a Data Catalog, relative to a Lake Formation resource, which includes the Data Catalog, databases, tables, LF-tags, and LF-tag policies. For more information, see [Security and Access Control to Metadata and Data in Lake Formation](https://docs.aws.amazon.com/lake-formation/latest/dg/security-data-access.html).
//
// > **NOTE:** This data source deals with explicitly granted permissions. Lake Formation grants implicit permissions to data lake administrators, database creators, and table creators. For more information, see [Implicit Lake Formation Permissions](https://docs.aws.amazon.com/lake-formation/latest/dg/implicit-permissions.html).
func LookupPermissions(ctx *pulumi.Context, args *LookupPermissionsArgs, opts ...pulumi.InvokeOption) (*LookupPermissionsResult, error) {
	opts = internal.PkgInvokeDefaultOpts(opts)
	var rv LookupPermissionsResult
	err := ctx.Invoke("aws:lakeformation/getPermissions:getPermissions", args, &rv, opts...)
	if err != nil {
		return nil, err
	}
	return &rv, nil
}

// A collection of arguments for invoking getPermissions.
type LookupPermissionsArgs struct {
	// Identifier for the Data Catalog. By default, the account ID. The Data Catalog is the persistent metadata store. It contains database definitions, table definitions, and other control information to manage your Lake Formation environment.
	CatalogId *string `pulumi:"catalogId"`
	// Whether the permissions are to be granted for the Data Catalog. Defaults to `false`.
	CatalogResource *bool `pulumi:"catalogResource"`
	// Configuration block for a data location resource. Detailed below.
	DataLocation *GetPermissionsDataLocation `pulumi:"dataLocation"`
	// Configuration block for a database resource. Detailed below.
	Database *GetPermissionsDatabase `pulumi:"database"`
	// Configuration block for an LF-tag resource. Detailed below.
	LfTag *GetPermissionsLfTag `pulumi:"lfTag"`
	// Configuration block for an LF-tag policy resource. Detailed below.
	LfTagPolicy *GetPermissionsLfTagPolicy `pulumi:"lfTagPolicy"`
	// Principal to be granted the permissions on the resource. Supported principals are IAM users or IAM roles.
	//
	// One of the following is required:
	Principal string `pulumi:"principal"`
	// Configuration block for a table resource. Detailed below.
	Table *GetPermissionsTable `pulumi:"table"`
	// Configuration block for a table with columns resource. Detailed below.
	//
	// The following arguments are optional:
	TableWithColumns *GetPermissionsTableWithColumns `pulumi:"tableWithColumns"`
}

// A collection of values returned by getPermissions.
type LookupPermissionsResult struct {
	CatalogId       *string                    `pulumi:"catalogId"`
	CatalogResource *bool                      `pulumi:"catalogResource"`
	DataLocation    GetPermissionsDataLocation `pulumi:"dataLocation"`
	Database        GetPermissionsDatabase     `pulumi:"database"`
	// The provider-assigned unique ID for this managed resource.
	Id          string                    `pulumi:"id"`
	LfTag       GetPermissionsLfTag       `pulumi:"lfTag"`
	LfTagPolicy GetPermissionsLfTagPolicy `pulumi:"lfTagPolicy"`
	// List of permissions granted to the principal. For details on permissions, see [Lake Formation Permissions Reference](https://docs.aws.amazon.com/lake-formation/latest/dg/lf-permissions-reference.html).
	Permissions []string `pulumi:"permissions"`
	// Subset of `permissions` which the principal can pass.
	PermissionsWithGrantOptions []string                       `pulumi:"permissionsWithGrantOptions"`
	Principal                   string                         `pulumi:"principal"`
	Table                       GetPermissionsTable            `pulumi:"table"`
	TableWithColumns            GetPermissionsTableWithColumns `pulumi:"tableWithColumns"`
}

func LookupPermissionsOutput(ctx *pulumi.Context, args LookupPermissionsOutputArgs, opts ...pulumi.InvokeOption) LookupPermissionsResultOutput {
	outputResult := pulumix.ApplyErr[*LookupPermissionsArgs](args.ToOutput(), func(plainArgs *LookupPermissionsArgs) (*LookupPermissionsResult, error) {
		return LookupPermissions(ctx, plainArgs, opts...)
	})

	return pulumix.Cast[LookupPermissionsResultOutput, *LookupPermissionsResult](outputResult)
}

// A collection of arguments for invoking getPermissions.
type LookupPermissionsOutputArgs struct {
	// Identifier for the Data Catalog. By default, the account ID. The Data Catalog is the persistent metadata store. It contains database definitions, table definitions, and other control information to manage your Lake Formation environment.
	CatalogId pulumix.Input[*string] `pulumi:"catalogId"`
	// Whether the permissions are to be granted for the Data Catalog. Defaults to `false`.
	CatalogResource pulumix.Input[*bool] `pulumi:"catalogResource"`
	// Configuration block for a data location resource. Detailed below.
	DataLocation pulumix.Input[*GetPermissionsDataLocationArgs] `pulumi:"dataLocation"`
	// Configuration block for a database resource. Detailed below.
	Database pulumix.Input[*GetPermissionsDatabaseArgs] `pulumi:"database"`
	// Configuration block for an LF-tag resource. Detailed below.
	LfTag pulumix.Input[*GetPermissionsLfTagArgs] `pulumi:"lfTag"`
	// Configuration block for an LF-tag policy resource. Detailed below.
	LfTagPolicy pulumix.Input[*GetPermissionsLfTagPolicyArgs] `pulumi:"lfTagPolicy"`
	// Principal to be granted the permissions on the resource. Supported principals are IAM users or IAM roles.
	//
	// One of the following is required:
	Principal pulumix.Input[string] `pulumi:"principal"`
	// Configuration block for a table resource. Detailed below.
	Table pulumix.Input[*GetPermissionsTableArgs] `pulumi:"table"`
	// Configuration block for a table with columns resource. Detailed below.
	//
	// The following arguments are optional:
	TableWithColumns pulumix.Input[*GetPermissionsTableWithColumnsArgs] `pulumi:"tableWithColumns"`
}

func (args LookupPermissionsOutputArgs) ToOutput() pulumix.Output[*LookupPermissionsArgs] {
	allArgs := pulumix.All(
		args.CatalogId.ToOutput(context.Background()).AsAny(),
		args.CatalogResource.ToOutput(context.Background()).AsAny(),
		args.DataLocation.ToOutput(context.Background()).AsAny(),
		args.Database.ToOutput(context.Background()).AsAny(),
		args.LfTag.ToOutput(context.Background()).AsAny(),
		args.LfTagPolicy.ToOutput(context.Background()).AsAny(),
		args.Principal.ToOutput(context.Background()).AsAny(),
		args.Table.ToOutput(context.Background()).AsAny(),
		args.TableWithColumns.ToOutput(context.Background()).AsAny())
	return pulumix.Apply[[]any](allArgs, func(resolvedArgs []interface{}) *LookupPermissionsArgs {
		return &LookupPermissionsArgs{
			CatalogId:        resolvedArgs[0].(*string),
			CatalogResource:  resolvedArgs[1].(*bool),
			DataLocation:     resolvedArgs[2].(*GetPermissionsDataLocation),
			Database:         resolvedArgs[3].(*GetPermissionsDatabase),
			LfTag:            resolvedArgs[4].(*GetPermissionsLfTag),
			LfTagPolicy:      resolvedArgs[5].(*GetPermissionsLfTagPolicy),
			Principal:        resolvedArgs[6].(string),
			Table:            resolvedArgs[7].(*GetPermissionsTable),
			TableWithColumns: resolvedArgs[8].(*GetPermissionsTableWithColumns),
		}
	})
}

type LookupPermissionsResultOutput struct{ *pulumi.OutputState }

func (LookupPermissionsResultOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*LookupPermissionsResult)(nil)).Elem()
}

func (o LookupPermissionsResultOutput) ToOutput(context.Context) pulumix.Output[*LookupPermissionsResult] {
	return pulumix.Output[*LookupPermissionsResult]{
		OutputState: o.OutputState,
	}
}

func (o LookupPermissionsResultOutput) CatalogId() pulumix.Output[*string] {
	return pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) *string { return v.CatalogId })
}

func (o LookupPermissionsResultOutput) CatalogResource() pulumix.Output[*bool] {
	return pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) *bool { return v.CatalogResource })
}

func (o LookupPermissionsResultOutput) DataLocation() pulumix.GPtrOutput[GetPermissionsDataLocation, GetPermissionsDataLocationOutput] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) GetPermissionsDataLocation { return v.DataLocation })
	return pulumix.GPtrOutput[GetPermissionsDataLocation, GetPermissionsDataLocationOutput]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) Database() pulumix.GPtrOutput[GetPermissionsDatabase, GetPermissionsDatabaseOutput] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) GetPermissionsDatabase { return v.Database })
	return pulumix.GPtrOutput[GetPermissionsDatabase, GetPermissionsDatabaseOutput]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) Id() pulumix.Output[string] {
	return pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) string { return v.Id })
}

func (o LookupPermissionsResultOutput) LfTag() pulumix.GPtrOutput[GetPermissionsLfTag, GetPermissionsLfTagOutput] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) GetPermissionsLfTag { return v.LfTag })
	return pulumix.GPtrOutput[GetPermissionsLfTag, GetPermissionsLfTagOutput]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) LfTagPolicy() pulumix.GPtrOutput[GetPermissionsLfTagPolicy, GetPermissionsLfTagPolicyOutput] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) GetPermissionsLfTagPolicy { return v.LfTagPolicy })
	return pulumix.GPtrOutput[GetPermissionsLfTagPolicy, GetPermissionsLfTagPolicyOutput]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) Permissions() pulumix.ArrayOutput[string] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) []string { return v.Permissions })
	return pulumix.ArrayOutput[string]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) PermissionsWithGrantOptions() pulumix.ArrayOutput[string] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) []string { return v.PermissionsWithGrantOptions })
	return pulumix.ArrayOutput[string]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) Principal() pulumix.Output[string] {
	return pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) string { return v.Principal })
}

func (o LookupPermissionsResultOutput) Table() pulumix.GPtrOutput[GetPermissionsTable, GetPermissionsTableOutput] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) GetPermissionsTable { return v.Table })
	return pulumix.GPtrOutput[GetPermissionsTable, GetPermissionsTableOutput]{
		OutputState: value.OutputState,
	}
}

func (o LookupPermissionsResultOutput) TableWithColumns() pulumix.GPtrOutput[GetPermissionsTableWithColumns, GetPermissionsTableWithColumnsOutput] {
	value := pulumix.Apply[*LookupPermissionsResult](o, func(v *LookupPermissionsResult) GetPermissionsTableWithColumns { return v.TableWithColumns })
	return pulumix.GPtrOutput[GetPermissionsTableWithColumns, GetPermissionsTableWithColumnsOutput]{
		OutputState: value.OutputState,
	}
}
