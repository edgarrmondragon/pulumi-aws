// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package rds

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumix"
)

// Manages RDS Aurora Cluster Database Activity Streams.
//
// Database Activity Streams have some limits and requirements, refer to the [Monitoring Amazon Aurora using Database Activity Streams](https://docs.aws.amazon.com/AmazonRDS/latest/AuroraUserGuide/DBActivityStreams.html) documentation for detailed limitations and requirements.
//
// > **Note:** This resource always calls the RDS [`StartActivityStream`][2] API with the `ApplyImmediately` parameter set to `true`. This is because the provider needs the activity stream to be started in order for it to get the associated attributes.
//
// > **Note:** This resource depends on having at least one `rds.ClusterInstance` created. To avoid race conditions when all resources are being created together, add an explicit resource reference using the resource `dependsOn` meta-argument.
//
// > **Note:** This resource is available in all regions except the following: `cn-north-1`, `cn-northwest-1`, `us-gov-east-1`, `us-gov-west-1`
type ClusterActivityStream struct {
	pulumi.CustomResourceState

	// Specifies whether the database activity stream includes engine-native audit fields. This option only applies to an Oracle DB instance. By default, no engine-native audit fields are included. Defaults `false`.
	EngineNativeAuditFieldsIncluded pulumix.Output[*bool] `pulumi:"engineNativeAuditFieldsIncluded"`
	// The name of the Amazon Kinesis data stream to be used for the database activity stream.
	KinesisStreamName pulumix.Output[string] `pulumi:"kinesisStreamName"`
	// The AWS KMS key identifier for encrypting messages in the database activity stream. The AWS KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.
	KmsKeyId pulumix.Output[string] `pulumi:"kmsKeyId"`
	// Specifies the mode of the database activity stream. Database events such as a change or access generate an activity stream event. The database session can handle these events either synchronously or asynchronously. One of: `sync`, `async`.
	Mode pulumix.Output[string] `pulumi:"mode"`
	// The Amazon Resource Name (ARN) of the DB cluster.
	ResourceArn pulumix.Output[string] `pulumi:"resourceArn"`
}

// NewClusterActivityStream registers a new resource with the given unique name, arguments, and options.
func NewClusterActivityStream(ctx *pulumi.Context,
	name string, args *ClusterActivityStreamArgs, opts ...pulumi.ResourceOption) (*ClusterActivityStream, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.KmsKeyId == nil {
		return nil, errors.New("invalid value for required argument 'KmsKeyId'")
	}
	if args.Mode == nil {
		return nil, errors.New("invalid value for required argument 'Mode'")
	}
	if args.ResourceArn == nil {
		return nil, errors.New("invalid value for required argument 'ResourceArn'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource ClusterActivityStream
	err := ctx.RegisterResource("aws:rds/clusterActivityStream:ClusterActivityStream", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetClusterActivityStream gets an existing ClusterActivityStream resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetClusterActivityStream(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *ClusterActivityStreamState, opts ...pulumi.ResourceOption) (*ClusterActivityStream, error) {
	var resource ClusterActivityStream
	err := ctx.ReadResource("aws:rds/clusterActivityStream:ClusterActivityStream", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering ClusterActivityStream resources.
type clusterActivityStreamState struct {
	// Specifies whether the database activity stream includes engine-native audit fields. This option only applies to an Oracle DB instance. By default, no engine-native audit fields are included. Defaults `false`.
	EngineNativeAuditFieldsIncluded *bool `pulumi:"engineNativeAuditFieldsIncluded"`
	// The name of the Amazon Kinesis data stream to be used for the database activity stream.
	KinesisStreamName *string `pulumi:"kinesisStreamName"`
	// The AWS KMS key identifier for encrypting messages in the database activity stream. The AWS KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.
	KmsKeyId *string `pulumi:"kmsKeyId"`
	// Specifies the mode of the database activity stream. Database events such as a change or access generate an activity stream event. The database session can handle these events either synchronously or asynchronously. One of: `sync`, `async`.
	Mode *string `pulumi:"mode"`
	// The Amazon Resource Name (ARN) of the DB cluster.
	ResourceArn *string `pulumi:"resourceArn"`
}

type ClusterActivityStreamState struct {
	// Specifies whether the database activity stream includes engine-native audit fields. This option only applies to an Oracle DB instance. By default, no engine-native audit fields are included. Defaults `false`.
	EngineNativeAuditFieldsIncluded pulumix.Input[*bool]
	// The name of the Amazon Kinesis data stream to be used for the database activity stream.
	KinesisStreamName pulumix.Input[*string]
	// The AWS KMS key identifier for encrypting messages in the database activity stream. The AWS KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.
	KmsKeyId pulumix.Input[*string]
	// Specifies the mode of the database activity stream. Database events such as a change or access generate an activity stream event. The database session can handle these events either synchronously or asynchronously. One of: `sync`, `async`.
	Mode pulumix.Input[*string]
	// The Amazon Resource Name (ARN) of the DB cluster.
	ResourceArn pulumix.Input[*string]
}

func (ClusterActivityStreamState) ElementType() reflect.Type {
	return reflect.TypeOf((*clusterActivityStreamState)(nil)).Elem()
}

type clusterActivityStreamArgs struct {
	// Specifies whether the database activity stream includes engine-native audit fields. This option only applies to an Oracle DB instance. By default, no engine-native audit fields are included. Defaults `false`.
	EngineNativeAuditFieldsIncluded *bool `pulumi:"engineNativeAuditFieldsIncluded"`
	// The AWS KMS key identifier for encrypting messages in the database activity stream. The AWS KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.
	KmsKeyId string `pulumi:"kmsKeyId"`
	// Specifies the mode of the database activity stream. Database events such as a change or access generate an activity stream event. The database session can handle these events either synchronously or asynchronously. One of: `sync`, `async`.
	Mode string `pulumi:"mode"`
	// The Amazon Resource Name (ARN) of the DB cluster.
	ResourceArn string `pulumi:"resourceArn"`
}

// The set of arguments for constructing a ClusterActivityStream resource.
type ClusterActivityStreamArgs struct {
	// Specifies whether the database activity stream includes engine-native audit fields. This option only applies to an Oracle DB instance. By default, no engine-native audit fields are included. Defaults `false`.
	EngineNativeAuditFieldsIncluded pulumix.Input[*bool]
	// The AWS KMS key identifier for encrypting messages in the database activity stream. The AWS KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.
	KmsKeyId pulumix.Input[string]
	// Specifies the mode of the database activity stream. Database events such as a change or access generate an activity stream event. The database session can handle these events either synchronously or asynchronously. One of: `sync`, `async`.
	Mode pulumix.Input[string]
	// The Amazon Resource Name (ARN) of the DB cluster.
	ResourceArn pulumix.Input[string]
}

func (ClusterActivityStreamArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*clusterActivityStreamArgs)(nil)).Elem()
}

type ClusterActivityStreamOutput struct{ *pulumi.OutputState }

func (ClusterActivityStreamOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*ClusterActivityStream)(nil)).Elem()
}

func (o ClusterActivityStreamOutput) ToClusterActivityStreamOutput() ClusterActivityStreamOutput {
	return o
}

func (o ClusterActivityStreamOutput) ToClusterActivityStreamOutputWithContext(ctx context.Context) ClusterActivityStreamOutput {
	return o
}

func (o ClusterActivityStreamOutput) ToOutput(ctx context.Context) pulumix.Output[ClusterActivityStream] {
	return pulumix.Output[ClusterActivityStream]{
		OutputState: o.OutputState,
	}
}

// Specifies whether the database activity stream includes engine-native audit fields. This option only applies to an Oracle DB instance. By default, no engine-native audit fields are included. Defaults `false`.
func (o ClusterActivityStreamOutput) EngineNativeAuditFieldsIncluded() pulumix.Output[*bool] {
	value := pulumix.Apply[ClusterActivityStream](o, func(v ClusterActivityStream) pulumix.Output[*bool] { return v.EngineNativeAuditFieldsIncluded })
	return pulumix.Flatten[*bool, pulumix.Output[*bool]](value)
}

// The name of the Amazon Kinesis data stream to be used for the database activity stream.
func (o ClusterActivityStreamOutput) KinesisStreamName() pulumix.Output[string] {
	value := pulumix.Apply[ClusterActivityStream](o, func(v ClusterActivityStream) pulumix.Output[string] { return v.KinesisStreamName })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// The AWS KMS key identifier for encrypting messages in the database activity stream. The AWS KMS key identifier is the key ARN, key ID, alias ARN, or alias name for the KMS key.
func (o ClusterActivityStreamOutput) KmsKeyId() pulumix.Output[string] {
	value := pulumix.Apply[ClusterActivityStream](o, func(v ClusterActivityStream) pulumix.Output[string] { return v.KmsKeyId })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// Specifies the mode of the database activity stream. Database events such as a change or access generate an activity stream event. The database session can handle these events either synchronously or asynchronously. One of: `sync`, `async`.
func (o ClusterActivityStreamOutput) Mode() pulumix.Output[string] {
	value := pulumix.Apply[ClusterActivityStream](o, func(v ClusterActivityStream) pulumix.Output[string] { return v.Mode })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// The Amazon Resource Name (ARN) of the DB cluster.
func (o ClusterActivityStreamOutput) ResourceArn() pulumix.Output[string] {
	value := pulumix.Apply[ClusterActivityStream](o, func(v ClusterActivityStream) pulumix.Output[string] { return v.ResourceArn })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

func init() {
	pulumi.RegisterOutputType(ClusterActivityStreamOutput{})
}
