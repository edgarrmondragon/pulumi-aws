// Code generated by the Pulumi Terraform Bridge (tfgen) Tool DO NOT EDIT.
// *** WARNING: Do not edit by hand unless you're certain you know what you are doing! ***

package apprunner

import (
	"context"
	"reflect"

	"errors"
	"github.com/pulumi/pulumi-aws/sdk/v6/go/aws/internal"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumi"
	"github.com/pulumi/pulumi/sdk/v3/go/pulumix"
)

// Manages an App Runner Custom Domain association.
//
// > **NOTE:** After creation, you must use the information in the `certificationValidationRecords` attribute to add CNAME records to your Domain Name System (DNS). For each mapped domain name, add a mapping to the target App Runner subdomain (found in the `dnsTarget` attribute) and one or more certificate validation records. App Runner then performs DNS validation to verify that you own or control the domain name you associated. App Runner tracks domain validity in a certificate stored in AWS Certificate Manager (ACM).
type CustomDomainAssociation struct {
	pulumi.CustomResourceState

	// A set of certificate CNAME records used for this domain name. See Certificate Validation Records below for more details.
	CertificateValidationRecords pulumix.GArrayOutput[CustomDomainAssociationCertificateValidationRecord, CustomDomainAssociationCertificateValidationRecordOutput] `pulumi:"certificateValidationRecords"`
	// App Runner subdomain of the App Runner service. The custom domain name is mapped to this target name. Attribute only available if resource created (not imported) with this provider.
	DnsTarget pulumix.Output[string] `pulumi:"dnsTarget"`
	// Custom domain endpoint to association. Specify a base domain e.g., `example.com` or a subdomain e.g., `subdomain.example.com`.
	DomainName pulumix.Output[string] `pulumi:"domainName"`
	// Whether to associate the subdomain with the App Runner service in addition to the base domain. Defaults to `true`.
	EnableWwwSubdomain pulumix.Output[*bool] `pulumi:"enableWwwSubdomain"`
	// ARN of the App Runner service.
	ServiceArn pulumix.Output[string] `pulumi:"serviceArn"`
	// Current state of the certificate CNAME record validation. It should change to `SUCCESS` after App Runner completes validation with your DNS.
	Status pulumix.Output[string] `pulumi:"status"`
}

// NewCustomDomainAssociation registers a new resource with the given unique name, arguments, and options.
func NewCustomDomainAssociation(ctx *pulumi.Context,
	name string, args *CustomDomainAssociationArgs, opts ...pulumi.ResourceOption) (*CustomDomainAssociation, error) {
	if args == nil {
		return nil, errors.New("missing one or more required arguments")
	}

	if args.DomainName == nil {
		return nil, errors.New("invalid value for required argument 'DomainName'")
	}
	if args.ServiceArn == nil {
		return nil, errors.New("invalid value for required argument 'ServiceArn'")
	}
	opts = internal.PkgResourceDefaultOpts(opts)
	var resource CustomDomainAssociation
	err := ctx.RegisterResource("aws:apprunner/customDomainAssociation:CustomDomainAssociation", name, args, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// GetCustomDomainAssociation gets an existing CustomDomainAssociation resource's state with the given name, ID, and optional
// state properties that are used to uniquely qualify the lookup (nil if not required).
func GetCustomDomainAssociation(ctx *pulumi.Context,
	name string, id pulumi.IDInput, state *CustomDomainAssociationState, opts ...pulumi.ResourceOption) (*CustomDomainAssociation, error) {
	var resource CustomDomainAssociation
	err := ctx.ReadResource("aws:apprunner/customDomainAssociation:CustomDomainAssociation", name, id, state, &resource, opts...)
	if err != nil {
		return nil, err
	}
	return &resource, nil
}

// Input properties used for looking up and filtering CustomDomainAssociation resources.
type customDomainAssociationState struct {
	// A set of certificate CNAME records used for this domain name. See Certificate Validation Records below for more details.
	CertificateValidationRecords []CustomDomainAssociationCertificateValidationRecord `pulumi:"certificateValidationRecords"`
	// App Runner subdomain of the App Runner service. The custom domain name is mapped to this target name. Attribute only available if resource created (not imported) with this provider.
	DnsTarget *string `pulumi:"dnsTarget"`
	// Custom domain endpoint to association. Specify a base domain e.g., `example.com` or a subdomain e.g., `subdomain.example.com`.
	DomainName *string `pulumi:"domainName"`
	// Whether to associate the subdomain with the App Runner service in addition to the base domain. Defaults to `true`.
	EnableWwwSubdomain *bool `pulumi:"enableWwwSubdomain"`
	// ARN of the App Runner service.
	ServiceArn *string `pulumi:"serviceArn"`
	// Current state of the certificate CNAME record validation. It should change to `SUCCESS` after App Runner completes validation with your DNS.
	Status *string `pulumi:"status"`
}

type CustomDomainAssociationState struct {
	// A set of certificate CNAME records used for this domain name. See Certificate Validation Records below for more details.
	CertificateValidationRecords pulumix.Input[[]*CustomDomainAssociationCertificateValidationRecordArgs]
	// App Runner subdomain of the App Runner service. The custom domain name is mapped to this target name. Attribute only available if resource created (not imported) with this provider.
	DnsTarget pulumix.Input[*string]
	// Custom domain endpoint to association. Specify a base domain e.g., `example.com` or a subdomain e.g., `subdomain.example.com`.
	DomainName pulumix.Input[*string]
	// Whether to associate the subdomain with the App Runner service in addition to the base domain. Defaults to `true`.
	EnableWwwSubdomain pulumix.Input[*bool]
	// ARN of the App Runner service.
	ServiceArn pulumix.Input[*string]
	// Current state of the certificate CNAME record validation. It should change to `SUCCESS` after App Runner completes validation with your DNS.
	Status pulumix.Input[*string]
}

func (CustomDomainAssociationState) ElementType() reflect.Type {
	return reflect.TypeOf((*customDomainAssociationState)(nil)).Elem()
}

type customDomainAssociationArgs struct {
	// Custom domain endpoint to association. Specify a base domain e.g., `example.com` or a subdomain e.g., `subdomain.example.com`.
	DomainName string `pulumi:"domainName"`
	// Whether to associate the subdomain with the App Runner service in addition to the base domain. Defaults to `true`.
	EnableWwwSubdomain *bool `pulumi:"enableWwwSubdomain"`
	// ARN of the App Runner service.
	ServiceArn string `pulumi:"serviceArn"`
}

// The set of arguments for constructing a CustomDomainAssociation resource.
type CustomDomainAssociationArgs struct {
	// Custom domain endpoint to association. Specify a base domain e.g., `example.com` or a subdomain e.g., `subdomain.example.com`.
	DomainName pulumix.Input[string]
	// Whether to associate the subdomain with the App Runner service in addition to the base domain. Defaults to `true`.
	EnableWwwSubdomain pulumix.Input[*bool]
	// ARN of the App Runner service.
	ServiceArn pulumix.Input[string]
}

func (CustomDomainAssociationArgs) ElementType() reflect.Type {
	return reflect.TypeOf((*customDomainAssociationArgs)(nil)).Elem()
}

type CustomDomainAssociationOutput struct{ *pulumi.OutputState }

func (CustomDomainAssociationOutput) ElementType() reflect.Type {
	return reflect.TypeOf((*CustomDomainAssociation)(nil)).Elem()
}

func (o CustomDomainAssociationOutput) ToCustomDomainAssociationOutput() CustomDomainAssociationOutput {
	return o
}

func (o CustomDomainAssociationOutput) ToCustomDomainAssociationOutputWithContext(ctx context.Context) CustomDomainAssociationOutput {
	return o
}

func (o CustomDomainAssociationOutput) ToOutput(ctx context.Context) pulumix.Output[CustomDomainAssociation] {
	return pulumix.Output[CustomDomainAssociation]{
		OutputState: o.OutputState,
	}
}

// A set of certificate CNAME records used for this domain name. See Certificate Validation Records below for more details.
func (o CustomDomainAssociationOutput) CertificateValidationRecords() pulumix.GArrayOutput[CustomDomainAssociationCertificateValidationRecord, CustomDomainAssociationCertificateValidationRecordOutput] {
	value := pulumix.Apply[CustomDomainAssociation](o, func(v CustomDomainAssociation) pulumix.GArrayOutput[CustomDomainAssociationCertificateValidationRecord, CustomDomainAssociationCertificateValidationRecordOutput] {
		return v.CertificateValidationRecords
	})
	unwrapped := pulumix.Flatten[[]CustomDomainAssociationCertificateValidationRecord, pulumix.GArrayOutput[CustomDomainAssociationCertificateValidationRecord, CustomDomainAssociationCertificateValidationRecordOutput]](value)
	return pulumix.GArrayOutput[CustomDomainAssociationCertificateValidationRecord, CustomDomainAssociationCertificateValidationRecordOutput]{OutputState: unwrapped.OutputState}
}

// App Runner subdomain of the App Runner service. The custom domain name is mapped to this target name. Attribute only available if resource created (not imported) with this provider.
func (o CustomDomainAssociationOutput) DnsTarget() pulumix.Output[string] {
	value := pulumix.Apply[CustomDomainAssociation](o, func(v CustomDomainAssociation) pulumix.Output[string] { return v.DnsTarget })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// Custom domain endpoint to association. Specify a base domain e.g., `example.com` or a subdomain e.g., `subdomain.example.com`.
func (o CustomDomainAssociationOutput) DomainName() pulumix.Output[string] {
	value := pulumix.Apply[CustomDomainAssociation](o, func(v CustomDomainAssociation) pulumix.Output[string] { return v.DomainName })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// Whether to associate the subdomain with the App Runner service in addition to the base domain. Defaults to `true`.
func (o CustomDomainAssociationOutput) EnableWwwSubdomain() pulumix.Output[*bool] {
	value := pulumix.Apply[CustomDomainAssociation](o, func(v CustomDomainAssociation) pulumix.Output[*bool] { return v.EnableWwwSubdomain })
	return pulumix.Flatten[*bool, pulumix.Output[*bool]](value)
}

// ARN of the App Runner service.
func (o CustomDomainAssociationOutput) ServiceArn() pulumix.Output[string] {
	value := pulumix.Apply[CustomDomainAssociation](o, func(v CustomDomainAssociation) pulumix.Output[string] { return v.ServiceArn })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

// Current state of the certificate CNAME record validation. It should change to `SUCCESS` after App Runner completes validation with your DNS.
func (o CustomDomainAssociationOutput) Status() pulumix.Output[string] {
	value := pulumix.Apply[CustomDomainAssociation](o, func(v CustomDomainAssociation) pulumix.Output[string] { return v.Status })
	return pulumix.Flatten[string, pulumix.Output[string]](value)
}

func init() {
	pulumi.RegisterOutputType(CustomDomainAssociationOutput{})
}
