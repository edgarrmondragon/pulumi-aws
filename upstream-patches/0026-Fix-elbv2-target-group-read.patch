From 91ff8d8f317cfa832163b43e59b7fe2b2d1fc3b2 Mon Sep 17 00:00:00 2001
From: Daniel Bradley <daniel@pulumi.com>
Date: Fri, 12 May 2023 10:55:42 +0100
Subject: [PATCH 26/28] Fix elbv2 target group read

Workaround for https://github.com/pulumi/pulumi-aws/issues/2517
Don't return single empty map. Return empty list instead.
---
 internal/service/elbv2/target_group.go | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/internal/service/elbv2/target_group.go b/internal/service/elbv2/target_group.go
index 4c877fab9b..f05936f8fb 100644
--- a/internal/service/elbv2/target_group.go
+++ b/internal/service/elbv2/target_group.go
@@ -1130,6 +1130,12 @@ func flattenTargetGroupFailover(attributes []*elbv2.TargetGroupAttribute) []inte
 		}
 	}
 
+	// Workaround for https://github.com/pulumi/pulumi-aws/issues/2517
+	// Don't return single empty map. Return empty list instead.
+	if len(m) == 0 {
+		return []interface{}{}
+	}
+
 	return []interface{}{m}
 }
 
